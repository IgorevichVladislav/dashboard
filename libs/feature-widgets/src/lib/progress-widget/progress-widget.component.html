<!-- progress-widget.component.html -->
<mat-card class="progress-widget">
  <mat-card-header>
    <mat-card-title>
      <mat-icon>trending_up</mat-icon>
      Прогресс выполнения
    </mat-card-title>

    <button
      mat-icon-button
      class="delete-btn"
      (click)="onDelete()"
      aria-label="Удалить виджет">
      <mat-icon>close</mat-icon>
    </button>
  </mat-card-header>

  <mat-card-content>
    <!-- Информация о проекте -->
    <div class="project-info">
      <h3 class="project-name">{{ dataProgressWidget().name }}</h3>
      <span class="project-status" [class]="dataProgressWidget().status">
        {{ statusText() }}
      </span>
    </div>

    <!-- Прогресс бар -->
    <div class="progress-section">
      <div class="progress-header">
        <span class="progress-percentage">{{ progressPercentage() }}%</span>
        <span class="progress-text">
          {{ dataProgressWidget().tasksCompleted }} из {{ dataProgressWidget().tasksTotal }} задач
        </span>
      </div>

      <mat-progress-bar
        class="progress-bar"
        mode="determinate"
        [value]="progressPercentage()"
        [color]="progressColor()">
      </mat-progress-bar>
    </div>

    <!-- Детальная статистика -->
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-value">{{ dataProgressWidget().tasksCompleted }}</div>
        <div class="stat-label">Выполнено</div>
      </div>

      <div class="stat-item">
        <div class="stat-value">{{ remainingTasks() }}</div>
        <div class="stat-label">Осталось</div>
      </div>

      <div class="stat-item">
        <div class="stat-value">{{ dataProgressWidget().tasksTotal }}</div>
        <div class="stat-label">Всего</div>
      </div>
    </div>

    <!-- Сроки проекта -->
    <div class="timeline-info">
      <div class="date-item">
        <mat-icon>event</mat-icon>
        <span>Начало: {{ dataProgressWidget().startDate | date:'dd.MM.yyyy' }}</span>
      </div>
      <div class="date-item">
        <mat-icon>event_available</mat-icon>
        <span>Завершение: {{ dataProgressWidget().endDate | date:'dd.MM.yyyy' }}</span>
      </div>
    </div>
  </mat-card-content>
</mat-card>
